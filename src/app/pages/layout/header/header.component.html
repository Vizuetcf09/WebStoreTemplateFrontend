<header class="h-fit justify-center lg:p-4 py-2 px-2">
  <!-- Unified Container -->
  <div
    class="h-fit bg-brand-green shadow-lg z-50 transition-all duration-500 ease-in-out overflow-hidden relative"
    [ngClass]="isMenuOpen ? 'w-full py-6 px-8 rounded-3xl' : 'h-fit w-full max-w-7xl px-6 py-3 rounded-3xl'">

    <!-- Top Row: Logo & Controls -->
    <div class="flex justify-between items-center w-full">
      <!-- Logo -->
      <div class="text-3xl font-black text-brand-dark tracking-tighter">
        <a routerLink="/"> Web/Store </a>
      </div>

      <!-- Desktop Menu (Hidden on Mobile) -->
      <nav class="hidden md:flex items-center gap-8 font-bold text-brand-dark text-lg"
        [ngClass]="{'opacity-0 pointer-events-none': isMenuOpen}">

        @for (item of menuItems; track item.link) {
        <a [routerLink]="item.link" class="hover:opacity-70 transition-opacity">
          {{ item.label }}
        </a>
        }

      </nav>

      <!-- Mobile Toggle Buttons -->
      <div class="md:hidden">
        <button (click)="toggleMenu()" class="flex flex-col gap-1.5 focus:outline-none z-50">
          <span class="block w-8 h-1 bg-brand-dark rounded-full transition-all duration-300"
            [ngClass]="{'rotate-45 translate-y-2.5': isMenuOpen}">
          </span>
          <span class="block w-8 h-1 bg-brand-dark rounded-full transition-all duration-300"
            [ngClass]="{'opacity-0': isMenuOpen}">
          </span>
          <span class="block w-8 h-1 bg-brand-dark rounded-full transition-all duration-300"
            [ngClass]="{'-rotate-45 -translate-y-2.5': isMenuOpen}">
          </span>
        </button>
      </div>
    </div>

    <!-- Mobile Menu Links -->
    <nav class="flex flex-col gap-6 font-bold text-brand-dark text-2xl text-start transition-all duration-300 overflow-hidden px-4"
      [ngClass]="{
        'max-h-0 opacity-0 pointer-events-none': !isMenuOpen,
        'max-h-96 opacity-100 mt-6': isMenuOpen
      }">

      @for (item of menuItems; track item.link) {
      <a [routerLink]="item.link" (click)="toggleMenu()" class="hover:opacity-70 transition-opacity">
        {{ item.label }}
      </a>
      }

    </nav>
  </div>
</header>